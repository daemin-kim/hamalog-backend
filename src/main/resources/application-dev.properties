# Development Environment Configuration
# This configuration file is used for development environment.
# Unlike production, additional logging is enabled for debugging.

spring.profiles.active=dev

# Database Configuration - Uses environment variables from docker-compose-dev.yml
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# ========================================
# HikariCP Connection Pool (Dev)
# ========================================
# \uAC1C\uBC1C \uD658\uACBD\uC5D0\uC11C\uB294 \uCEE4\uB125\uC158 \uB204\uC218 \uAC10\uC9C0 \uD65C\uC131\uD654
# leak-detection-threshold: \uCEE4\uB125\uC158\uC774 \uBC18\uD658\uB418\uC9C0 \uC54A\uACE0 \uC774 \uC2DC\uAC04\uC774 \uC9C0\uB098\uBA74 \uACBD\uACE0 \uB85C\uADF8 \uCD9C\uB825
spring.datasource.hikari.leak-detection-threshold=2000

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# OAuth2 Kakao Configuration - Set via environment variables
spring.security.oauth2.client.registration.kakao.client-id=${KAKAO_CLIENT_ID}
spring.security.oauth2.client.registration.kakao.client-secret=${KAKAO_CLIENT_SECRET}
spring.security.oauth2.client.registration.kakao.redirect-uri=${KAKAO_REDIRECT_URI}

# JWT Configuration - Set via environment variables or use defaults
jwt.secret=${JWT_SECRET}
jwt.expiry=${JWT_EXPIRY:1800000}
jwt.refresh-token.expiry=${JWT_REFRESH_TOKEN_EXPIRY:604800000}

# Data encryption key - Set via environment variables
hamalog.encryption.key=${HAMALOG_ENCRYPTION_KEY}

# Swagger UI enabled in development
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# Redis Configuration
spring.data.redis.host=${SPRING_DATA_REDIS_HOST}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD}

# CORS Configuration - Development friendly
hamalog.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080}

# OAuth2 redirect URI
hamalog.oauth2.redirect-uri=${FRONTEND_URL:http://localhost:3000}/oauth/kakao

# Actuator - Full access in development
management.endpoints.web.exposure.include=health,info,metrics,env,beans
management.endpoint.health.show-details=always

# Logging - Verbose for debugging
logging.level.root=INFO
logging.level.com.Hamalog=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql=DEBUG

# Error details - Enabled for debugging
server.error.include-stacktrace=always
server.error.include-message=always
server.error.include-binding-errors=always

# Forward Headers Strategy
server.forward-headers-strategy=native

# Bot Protection - Disabled in development for easier testing
hamalog.security.bot-protection.enabled=${BOT_PROTECTION_ENABLED:false}
hamalog.security.bot-protection.log-blocked=${BOT_PROTECTION_LOG_BLOCKED:true}

# ===== Discord Alert Configuration (Dev) =====
# \uAC1C\uBC1C \uD658\uACBD\uC5D0\uC11C \uB514\uC2A4\uCF54\uB4DC \uC54C\uB9BC \uD65C\uC131\uD654
hamalog.alert.discord.enabled=${DISCORD_ALERT_ENABLED:true}
hamalog.alert.discord.error-webhook-url=${DISCORD_ERROR_WEBHOOK_URL:}
hamalog.alert.discord.dlq-webhook-url=${DISCORD_DLQ_WEBHOOK_URL:}
hamalog.alert.discord.min-severity=${DISCORD_ALERT_MIN_SEVERITY:HIGH}
hamalog.alert.rate-limit.max-alerts-per-hour=${DISCORD_ALERT_MAX_PER_HOUR:20}
