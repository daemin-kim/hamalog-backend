# Hamalog API ë³´ì•ˆ ì·¨ì•½ì  ì¢…í•© ë¶„ì„ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 21ì¼  
**í”„ë¡œì íŠ¸**: Hamalog Backend API  
**ë¶„ì„ ë²”ìœ„**: ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ë° ë³´ì•ˆ êµ¬í˜„  
**ë¶„ì„ì**: AI Security Analyst

---

## ğŸ“‹ ëª©ì°¨

1. [Executive Summary](#executive-summary)
2. [ë¶„ì„ ë°©ë²•ë¡ ](#ë¶„ì„-ë°©ë²•ë¡ )
3. [ë°œê²¬ëœ ì·¨ì•½ì  ëª©ë¡](#ë°œê²¬ëœ-ì·¨ì•½ì -ëª©ë¡)
4. [ì‹¬ê°ë„ë³„ ë¶„ë¥˜](#ì‹¬ê°ë„ë³„-ë¶„ë¥˜)
5. [ìƒì„¸ ì·¨ì•½ì  ë¶„ì„](#ìƒì„¸-ì·¨ì•½ì -ë¶„ì„)
6. [ê¶Œì¥ ì¡°ì¹˜ì‚¬í•­](#ê¶Œì¥-ì¡°ì¹˜ì‚¬í•­)
7. [ê²°ë¡ ](#ê²°ë¡ )

---

## ğŸ¯ Executive Summary

### ë¶„ì„ ê°œìš”
Hamalog í”„ë¡œì íŠ¸ì˜ REST API ë³´ì•ˆ ìƒíƒœë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ì´ **12ê°œì˜ ë³´ì•ˆ ì·¨ì•½ì **ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì‹¬ê°ë„ëŠ” HIGH 2ê±´, MEDIUM 6ê±´, LOW 4ê±´ìœ¼ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.

### ì£¼ìš” ë°œê²¬ì‚¬í•­
- âœ… **ê°•ì **: JWT ê¸°ë°˜ ì¸ì¦, AOP ê¶Œí•œ ê²€ì¦, Rate Limiting, ë°ì´í„° ì•”í˜¸í™” êµ¬í˜„
- âš ï¸ **ì•½ì **: Refresh Token ë¯¸êµ¬í˜„, CSRF í† í° ê²€ì¦ ë¶ˆì™„ì „, íŒŒì¼ ì—…ë¡œë“œ ì·¨ì•½ì 
- ğŸ”´ **ê¸´ê¸‰ ì¡°ì¹˜ í•„ìš”**: í† í° ê°±ì‹  ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬, ê³„ì • íƒˆí‡´ ì‹œ ë™ì‹œì„± ë¬¸ì œ

### ë³´ì•ˆ ìˆ˜ì¤€ í‰ê°€
| ì˜ì—­ | í‰ê°€ | ì ìˆ˜ |
|------|------|------|
| ì¸ì¦ ë° ì¸ê°€ | ì–‘í˜¸ | 7.5/10 |
| ë°ì´í„° ë³´í˜¸ | ìš°ìˆ˜ | 8.5/10 |
| API ë³´ì•ˆ | ë³´í†µ | 6.5/10 |
| ì…ë ¥ ê²€ì¦ | ì–‘í˜¸ | 7.0/10 |
| **ì „ì²´ í‰ê· ** | **ì–‘í˜¸** | **7.4/10** |

---

## ğŸ” ë¶„ì„ ë°©ë²•ë¡ 

### 1. ì •ì  ì½”ë“œ ë¶„ì„
- ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ (6ê°œ íŒŒì¼)
- ì„œë¹„ìŠ¤ ê³„ì¸µ (ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- ë³´ì•ˆ ì„¤ì • íŒŒì¼ (SecurityConfig, JWT Provider)
- ë°ì´í„° ê²€ì¦ ë¡œì§ (Validators)

### 2. API ëª…ì„¸ì„œ ëŒ€ì¡° ë¶„ì„
- API-specification.mdì™€ ì‹¤ì œ êµ¬í˜„ ë¹„êµ
- ì—”ë“œí¬ì¸íŠ¸ë³„ ê¶Œí•œ ê²€ì¦ í™•ì¸
- ì…ë ¥/ì¶œë ¥ ë°ì´í„° êµ¬ì¡° ê²€ì¦

### 3. OWASP Top 10 ê¸°ì¤€ ê²€í† 
- Broken Access Control
- Cryptographic Failures
- Injection
- Security Misconfiguration
- ê¸°íƒ€ ë³´ì•ˆ ìœ„í˜‘

---

## ğŸ“Š ë°œê²¬ëœ ì·¨ì•½ì  ëª©ë¡

| ID | ì·¨ì•½ì ëª… | ì‹¬ê°ë„ | ì˜í–¥ë°›ëŠ” ì»´í¬ë„ŒíŠ¸ | ìƒíƒœ |
|----|----------|--------|------------------|------|
| V-001 | Refresh Token ë©”ì»¤ë‹ˆì¦˜ ë¯¸êµ¬í˜„ | ğŸ”´ HIGH | AuthController | Open |
| V-002 | ê³„ì • íƒˆí‡´ ì‹œ ë™ì‹œì„± ë¬¸ì œ | ğŸ”´ HIGH | AuthService | Open |
| V-003 | CSRF í† í° ê²€ì¦ ë¶ˆì™„ì „ | ğŸŸ¡ MEDIUM | SecurityConfig | Open |
| V-004 | Rate Limiting ìš°íšŒ ê°€ëŠ¥ | ğŸŸ¡ MEDIUM | RateLimitingService | Open |
| V-005 | íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œ ë…¸ì¶œ ìœ„í—˜ | ğŸŸ¡ MEDIUM | ImageValidator | Open |
| V-006 | ë¡œê·¸ì•„ì›ƒ ì‹œ í† í° ê²€ì¦ ë¯¸í¡ | ğŸŸ¡ MEDIUM | AuthController | Open |
| V-007 | OAuth2 State íŒŒë¼ë¯¸í„° ë¯¸ê²€ì¦ | ğŸŸ¡ MEDIUM | OAuth2Controller | Open |
| V-008 | ì—ëŸ¬ ë©”ì‹œì§€ ì •ë³´ ë…¸ì¶œ | ğŸŸ¡ MEDIUM | GlobalExceptionHandler | Open |
| V-009 | CORS ì„¤ì • ê³¼ë„í•œ í—ˆìš© | ğŸŸ¢ LOW | SecurityConfig | Open |
| V-010 | í˜ì´ì§€ë„¤ì´ì…˜ DoS ì·¨ì•½ì  | ğŸŸ¢ LOW | MedicationScheduleController | Open |
| V-011 | JWT Secret Key ê´€ë¦¬ ì·¨ì•½ | ğŸŸ¢ LOW | JwtTokenProvider | Open |
| V-012 | ë¡œê¹… ë¯¼ê°ì •ë³´ ë…¸ì¶œ | ğŸŸ¢ LOW | ì „ì²´ | Open |

---

## ğŸ¨ ì‹¬ê°ë„ë³„ ë¶„ë¥˜

### ğŸ”´ HIGH (ê¸´ê¸‰ ì¡°ì¹˜ í•„ìš”)

#### V-001: Refresh Token ë©”ì»¤ë‹ˆì¦˜ ë¯¸êµ¬í˜„
**ìœ„ì¹˜**: `AuthController.java`, `AuthService.java`

**ë¬¸ì œì **:
```java
// í˜„ì¬ êµ¬í˜„: AccessTokenë§Œ ë°˜í™˜
public LoginResponse authenticateAndGenerateToken(String loginId, String password) {
    // ...
    String accessToken = jwtTokenProvider.createToken(authentication.getName());
    long expiresIn = 900;  // 15ë¶„ë§Œ ìœ íš¨
    
    var refreshToken = refreshTokenService.createRefreshToken(member.getMemberId());
    
    return new LoginResponse(accessToken, refreshToken.getTokenValue(), expiresIn);
}
```

**ì·¨ì•½ì **:
- AccessToken ë§Œë£Œ ì‹œ(15ë¶„ í›„) ì‚¬ìš©ìê°€ ì¬ë¡œê·¸ì¸ í•„ìš”
- API ëª…ì„¸ì„œì— `/auth/refresh` ì—”ë“œí¬ì¸íŠ¸ê°€ ì •ì˜ë˜ì–´ ìˆìœ¼ë‚˜ êµ¬í˜„ë˜ì§€ ì•ŠìŒ
- RefreshTokenì„ ìƒì„±í•˜ì§€ë§Œ ì‹¤ì œ í† í° ê°±ì‹  ê¸°ëŠ¥ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ì˜í–¥**:
- ì‚¬ìš©ì ê²½í—˜ ì €í•˜ (ë¹ˆë²ˆí•œ ì¬ë¡œê·¸ì¸ ìš”êµ¬)
- ì„¸ì…˜ ìœ ì§€ ë¶ˆê°€ëŠ¥
- ëª¨ë°”ì¼ ì•±ì—ì„œ ì¹˜ëª…ì ì¸ UX ë¬¸ì œ

**ê¶Œì¥ ì¡°ì¹˜**:
```java
@PostMapping("/refresh")
public ResponseEntity<TokenRefreshResponse> refreshToken(
        @Valid @RequestBody TokenRefreshRequest request) {
    TokenRefreshResponse response = authService.refreshAccessToken(request.refreshToken());
    return ResponseEntity.ok(response);
}
```

#### V-002: ê³„ì • íƒˆí‡´ ì‹œ ë™ì‹œì„± ë¬¸ì œ
**ìœ„ì¹˜**: `AuthService.deleteMember()`

**ë¬¸ì œì **:
```java
@Transactional(rollbackFor = {Exception.class})
public void deleteMember(String loginId, String token) {
    Member member = memberRepository.findByLoginId(loginId)
            .orElseThrow(() -> new CustomException(ErrorCode.MEMBER_NOT_FOUND));
    
    Long memberId = member.getMemberId();
    deleteMemberRelatedData(memberId);
    
    memberRepository.delete(member);
    
    // ì´ë²¤íŠ¸ ë°œí–‰ì€ íŠ¸ëœì­ì…˜ ì™¸ë¶€ì—ì„œ ì²˜ë¦¬ë¨
    if (isValidTokenFormat(token)) {
        eventPublisher.publishEvent(new MemberDeletedEvent(loginId, token, memberId));
    }
}
```

**ì·¨ì•½ì **:
1. **Race Condition**: íšŒì› íƒˆí‡´ ì¤‘ ë™ì¼ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ API í˜¸ì¶œ ì‹œ ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ê°€ëŠ¥
2. **Cascade ì‚­ì œ ë¯¸ê²€ì¦**: ê´€ë ¨ ë°ì´í„° ì‚­ì œ ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•ŠìŒ
3. **í† í° ë¬´íš¨í™” ì§€ì—°**: ì´ë²¤íŠ¸ ê¸°ë°˜ ì²˜ë¦¬ë¡œ ì¸í•œ ì¦‰ì‹œì„± ë¶€ì¡±

**ì˜í–¥**:
- íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ë°ì´í„° ìƒì„± ê°€ëŠ¥
- íƒˆí‡´ í›„ì—ë„ ì§§ì€ ì‹œê°„ ë™ì•ˆ API ì ‘ê·¼ ê°€ëŠ¥
- ë°ì´í„°ë² ì´ìŠ¤ ì •í•©ì„± ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

**ê¶Œì¥ ì¡°ì¹˜**:
```java
@Transactional(rollbackFor = {Exception.class})
public void deleteMember(String loginId, String token) {
    // 1. ì¦‰ì‹œ í† í° ë¬´íš¨í™” (íŠ¸ëœì­ì…˜ ë‚´ë¶€)
    if (isValidTokenFormat(token)) {
        tokenBlacklistService.blacklistToken(token);
    }
    
    // 2. ì‚¬ìš©ì ê³„ì • ì ê¸ˆ (soft delete)
    Member member = memberRepository.findByLoginId(loginId)
            .orElseThrow(() -> new CustomException(ErrorCode.MEMBER_NOT_FOUND));
    member.markAsDeleted(); // ìƒíƒœ í”Œë˜ê·¸ ì¶”ê°€
    
    // 3. ê´€ë ¨ ë°ì´í„° ì‚­ì œ
    Long memberId = member.getMemberId();
    deleteMemberRelatedData(memberId);
    
    // 4. íšŒì› ì™„ì „ ì‚­ì œ
    memberRepository.delete(member);
    
    // 5. ì´ë²¤íŠ¸ ë°œí–‰
    eventPublisher.publishEvent(new MemberDeletedEvent(loginId, token, memberId));
}
```

---

### ğŸŸ¡ MEDIUM (ì¤‘ìš” ì¡°ì¹˜ í•„ìš”)

#### V-003: CSRF í† í° ê²€ì¦ ë¶ˆì™„ì „
**ìœ„ì¹˜**: `SecurityConfig.java`

**ë¬¸ì œì **:
```java
http.csrf(csrf -> csrf.disable())
```

**ì·¨ì•½ì **:
- CSRF ë³´í˜¸ê°€ ì™„ì „íˆ ë¹„í™œì„±í™”ë¨
- Stateless JWT ì¸ì¦ ë°©ì‹ì´ì§€ë§Œ ì¼ë¶€ ì—”ë“œí¬ì¸íŠ¸ëŠ” CSRF ë³´í˜¸ í•„ìš”
- `/auth/signup`, `/auth/login` ë“±ì€ CSRF ê³µê²©ì— ë…¸ì¶œë¨

**ì˜í–¥**:
- ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ íƒˆì·¨ ê°€ëŠ¥
- ì¤‘ê°„ì ê³µê²©(MITM)ì— ì·¨ì•½

**ê¶Œì¥ ì¡°ì¹˜**:
- ë¡œê·¸ì¸/íšŒì›ê°€ì… ì—”ë“œí¬ì¸íŠ¸ì— CSRF í† í° ì ìš©
- Double Submit Cookie íŒ¨í„´ êµ¬í˜„
- SameSite Cookie ì†ì„± í™œìš©

#### V-004: Rate Limiting ìš°íšŒ ê°€ëŠ¥
**ìœ„ì¹˜**: `RateLimitingService.java`

**ë¬¸ì œì **:
```java
public boolean tryConsumeAuthRequest(String key) {
    return checkRateLimit(key, AUTH_REQUESTS_PER_MINUTE, 1, TimeUnit.MINUTES) &&
           checkRateLimit(key, AUTH_REQUESTS_PER_HOUR, 1, TimeUnit.HOURS);
}
```

**ì·¨ì•½ì **:
1. **IP ê¸°ë°˜ ì œí•œ**: X-Forwarded-For í—¤ë” ì¡°ì‘ìœ¼ë¡œ ìš°íšŒ ê°€ëŠ¥
2. **Redis ì¥ì•  ì‹œ**: `catch` ë¸”ë¡ì—ì„œ `return true`ë¡œ ëª¨ë“  ìš”ì²­ í—ˆìš©
3. **ë¶„ì‚° í™˜ê²½ ë¯¸ê³ ë ¤**: ì—¬ëŸ¬ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ Rate Limit ê³µìœ  ì•ˆ ë¨

**ì˜í–¥**:
- Brute Force ê³µê²© ê°€ëŠ¥
- DDoS ê³µê²©ì— ì·¨ì•½
- ì„œë¹„ìŠ¤ ê°€ìš©ì„± ì €í•˜

**ê¶Œì¥ ì¡°ì¹˜**:
```java
private boolean checkRateLimit(String key, int maxRequests, long windowSize, TimeUnit timeUnit) {
    try {
        // ... ê¸°ì¡´ ë¡œì§
    } catch (Exception e) {
        log.error("Error checking rate limit for key: " + key, e);
        // Redis ì¥ì•  ì‹œ ë³´ìˆ˜ì ìœ¼ë¡œ ì ‘ê·¼ ì°¨ë‹¨
        return false; // ë³€ê²½: true -> false
    }
}
```

#### V-005: íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œ ë…¸ì¶œ ìœ„í—˜
**ìœ„ì¹˜**: `ImageValidator.java`, `FileStorageService.java`

**ë¬¸ì œì **:
```java
private boolean isValidImageHeader(MultipartFile file) throws IOException {
    byte[] header = new byte[8];
    if (file.getInputStream().read(header) != 8) {
        return false;
    }
    // Magic Number ê²€ì¦ë§Œ ìˆ˜í–‰
}
```

**ì·¨ì•½ì **:
1. **íŒŒì¼ëª… ê²€ì¦ ë¶€ì¬**: ê²½ë¡œ ìˆœíšŒ ê³µê²©(Path Traversal) ê°€ëŠ¥
2. **íŒŒì¼ í¬ê¸°ë§Œ ì²´í¬**: ì••ì¶• í­íƒ„(Zip Bomb) ê³µê²© ë°©ì–´ ë¶€ì¬
3. **EXIF ë°ì´í„° ë¯¸ì œê±°**: ë©”íƒ€ë°ì´í„°ì— ë¯¼ê°ì •ë³´ í¬í•¨ ê°€ëŠ¥

**ì˜í–¥**:
- ì„œë²„ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ ê°€ëŠ¥
- ë””ìŠ¤í¬ ê³µê°„ ê³ ê°ˆ
- ê°œì¸ì •ë³´ ë…¸ì¶œ ìœ„í—˜

**ê¶Œì¥ ì¡°ì¹˜**:
```java
// 1. íŒŒì¼ëª… sanitization
String sanitizedFilename = file.getOriginalFilename()
    .replaceAll("[^a-zA-Z0-9.-]", "_")
    .replaceAll("\\.\\.", "");

// 2. ì´ë¯¸ì§€ ì¬ì¸ì½”ë”© (EXIF ì œê±°)
BufferedImage img = ImageIO.read(file.getInputStream());
ImageIO.write(img, "jpg", new File(safePath));

// 3. ì••ì¶• í•´ì œ í¬ê¸° ì œí•œ
if (decompressedSize > MAX_DECOMPRESSED_SIZE) {
    throw new SecurityException("Potential zip bomb detected");
}
```

#### V-006: ë¡œê·¸ì•„ì›ƒ ì‹œ í† í° ê²€ì¦ ë¯¸í¡
**ìœ„ì¹˜**: `AuthController.logout()`

**ë¬¸ì œì **:
```java
@PostMapping("/logout")
public ResponseEntity<String> logout(HttpServletRequest request) {
    String authorizationHeader = request.getHeader("Authorization");
    
    if (authorizationHeader != null && authorizationHeader.startsWith("Bearer ")) {
        String token = authorizationHeader.substring(7);
        authService.logoutUser(token);
        return ResponseEntity.ok(messageService.getMessage("auth.logout.success"));
    }
    
    return ResponseEntity.ok(messageService.getMessage("auth.logout.success.simple"));
}
```

**ì·¨ì•½ì **:
1. **í† í° ìœ íš¨ì„± ë¯¸ê²€ì¦**: ì´ë¯¸ ë§Œë£Œëœ í† í°ë„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë¨
2. **Bearer ì ‘ë‘ì‚¬ë§Œ í™•ì¸**: í† í° í˜•ì‹ ìì²´ëŠ” ê²€ì¦í•˜ì§€ ì•ŠìŒ
3. **ì„±ê³µ ë©”ì‹œì§€ ì¼ê´€ì„±**: í† í° ì—†ì´ë„ ì„±ê³µ ì‘ë‹µ ë°˜í™˜

**ì˜í–¥**:
- ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì €ì¥ì†Œ(Redis) ì˜¤ì—¼
- ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„
- ë³´ì•ˆ ë¡œê·¸ ì‹ ë¢°ì„± ì €í•˜

**ê¶Œì¥ ì¡°ì¹˜**:
```java
@PostMapping("/logout")
public ResponseEntity<String> logout(HttpServletRequest request) {
    String authorizationHeader = request.getHeader("Authorization");
    
    if (authorizationHeader == null || !authorizationHeader.startsWith("Bearer ")) {
        throw new CustomException(ErrorCode.INVALID_TOKEN);
    }
    
    String token = authorizationHeader.substring(7);
    
    // í† í° ìœ íš¨ì„± ê²€ì¦
    if (!jwtTokenProvider.validateToken(token)) {
        throw new CustomException(ErrorCode.INVALID_TOKEN);
    }
    
    authService.logoutUser(token);
    return ResponseEntity.ok(messageService.getMessage("auth.logout.success"));
}
```

#### V-007: OAuth2 State íŒŒë¼ë¯¸í„° ë¯¸ê²€ì¦
**ìœ„ì¹˜**: `OAuth2Controller.java`

**ë¬¸ì œì **:
OAuth2 ì½œë°±ì—ì„œ CSRF ë°©ì§€ë¥¼ ìœ„í•œ state íŒŒë¼ë¯¸í„° ê²€ì¦ì´ ëˆ„ë½ë˜ì—ˆì„ ê°€ëŠ¥ì„±

**ì·¨ì•½ì **:
- OAuth2 CSRF ê³µê²©ì— ë…¸ì¶œ
- ì¸ì¦ ì½”ë“œ íƒˆì·¨ ê°€ëŠ¥

**ê¶Œì¥ ì¡°ì¹˜**:
- state íŒŒë¼ë¯¸í„° ìƒì„± ë° ì„¸ì…˜/Redis ì €ì¥
- ì½œë°±ì—ì„œ state ê²€ì¦ ë¡œì§ ì¶”ê°€

#### V-008: ì—ëŸ¬ ë©”ì‹œì§€ ì •ë³´ ë…¸ì¶œ
**ìœ„ì¹˜**: `GlobalExceptionHandler.java`

**ë¬¸ì œì **:
ì—ëŸ¬ ì‘ë‹µì—ì„œ ê³¼ë„í•œ ì‹œìŠ¤í…œ ì •ë³´ ë…¸ì¶œ ê°€ëŠ¥ì„±

**ì·¨ì•½ì **:
- ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ë…¸ì¶œ
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì •ë³´ ìœ ì¶œ
- ë‚´ë¶€ ê²½ë¡œ ì •ë³´ ë…¸ì¶œ

**ê¶Œì¥ ì¡°ì¹˜**:
```java
@ExceptionHandler(Exception.class)
public ResponseEntity<ErrorResponse> handleGenericException(Exception ex) {
    log.error("Unexpected error occurred", ex); // ì„œë²„ ë¡œê·¸ì—ë§Œ ìƒì„¸ ê¸°ë¡
    
    // í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ì¼ë°˜ ë©”ì‹œì§€ë§Œ ë°˜í™˜
    return ResponseEntity
        .status(HttpStatus.INTERNAL_SERVER_ERROR)
        .body(new ErrorResponse("An unexpected error occurred", "INTERNAL_ERROR"));
}
```

---

### ğŸŸ¢ LOW (ê°œì„  ê¶Œì¥)

#### V-009: CORS ì„¤ì • ê³¼ë„í•œ í—ˆìš©
**ìœ„ì¹˜**: `SecurityConfig.corsConfigurationSource()`

**ë¬¸ì œì **:
```java
config.addAllowedOriginPattern(trimmed); // ëª¨ë“  íŒ¨í„´ í—ˆìš©
config.addAllowedMethod("GET");
config.addAllowedMethod("POST");
config.addAllowedMethod("PUT");
config.addAllowedMethod("DELETE");
config.addAllowedMethod("OPTIONS");
```

**ê¶Œì¥ ì¡°ì¹˜**:
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì •í™•í•œ ë„ë©”ì¸ë§Œ í—ˆìš©
- OPTIONS ë©”ì„œë“œëŠ” í•„ìš”í•œ ê²½ìš°ì—ë§Œ í—ˆìš©

#### V-010: í˜ì´ì§€ë„¤ì´ì…˜ DoS ì·¨ì•½ì 
**ìœ„ì¹˜**: `MedicationScheduleController.getMedicationSchedules()`

**ë¬¸ì œì **:
í˜ì´ì§€ í¬ê¸° ì œí•œ ë¶€ì¬ë¡œ ê³¼ë„í•œ ë°ì´í„° ìš”ì²­ ê°€ëŠ¥

**ê¶Œì¥ ì¡°ì¹˜**:
```java
@GetMapping("/list/{member-id}")
public ResponseEntity<MedicationScheduleListResponse> getMedicationSchedules(
        @PathVariable("member-id") Long memberId,
        @PageableDefault(size = 20, page = 0) 
        @Max(value = 100, message = "Page size cannot exceed 100") Pageable pageable) {
    // ...
}
```

#### V-011: JWT Secret Key ê´€ë¦¬ ì·¨ì•½
**ìœ„ì¹˜**: `JwtTokenProvider.init()`

**ë¬¸ì œì **:
ê°œë°œ í™˜ê²½ì—ì„œ ëœë¤ í‚¤ ìƒì„±ìœ¼ë¡œ ì¬ì‹œì‘ ì‹œ ëª¨ë“  í† í° ë¬´íš¨í™”

**ê¶Œì¥ ì¡°ì¹˜**:
- í™˜ê²½ ë³€ìˆ˜ë‚˜ Vaultì—ì„œ í‚¤ ê´€ë¦¬
- í‚¤ ë¡œí…Œì´ì…˜ ì •ì±… ìˆ˜ë¦½

#### V-012: ë¡œê¹… ë¯¼ê°ì •ë³´ ë…¸ì¶œ
**ìœ„ì¹˜**: ì „ì²´ ì„œë¹„ìŠ¤ ë ˆì´ì–´

**ë¬¸ì œì **:
```java
log.info("[AUTH] User logged in - loginId: {}, memberId: {}", loginId, member.getMemberId());
```

**ê¶Œì¥ ì¡°ì¹˜**:
- ë¯¼ê°ì •ë³´ëŠ” ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
- ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ì¶œë ¥ ì •ë³´ ì°¨ë“±í™”

---

## ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜ì‚¬í•­

### ë‹¨ê¸° ì¡°ì¹˜ (1-2ì£¼ ë‚´)
1. âœ… **Refresh Token ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„** (V-001)
2. âœ… **ê³„ì • íƒˆí‡´ ë™ì‹œì„± ë¬¸ì œ í•´ê²°** (V-002)
3. âœ… **Rate Limiting ê°•í™”** (V-004)

### ì¤‘ê¸° ì¡°ì¹˜ (1ê°œì›” ë‚´)
4. âœ… **CSRF ë³´í˜¸ í™œì„±í™”** (V-003)
5. âœ… **íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ ê°•í™”** (V-005)
6. âœ… **OAuth2 state ê²€ì¦ ì¶”ê°€** (V-007)

### ì¥ê¸° ì¡°ì¹˜ (2-3ê°œì›” ë‚´)
7. âœ… **ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€í™”** (V-008)
8. âœ… **ë¡œê¹… ì •ì±… ìˆ˜ë¦½** (V-012)
9. âœ… **ë³´ì•ˆ ê°ì‚¬ ë¡œê·¸ êµ¬í˜„**
10. âœ… **ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰**

---

## ğŸ“ˆ ê°œì„  ì „/í›„ ë¹„êµ

### í˜„ì¬ ìƒíƒœ
```
ì¸ì¦ ë³´ì•ˆ:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%
ë°ì´í„° ë³´í˜¸:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 90%
API ë³´ì•ˆ:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%
ì…ë ¥ ê²€ì¦:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 70%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì „ì²´ í‰ì :     7.4/10
```

### ê°œì„  í›„ ì˜ˆìƒ
```
ì¸ì¦ ë³´ì•ˆ:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
ë°ì´í„° ë³´í˜¸:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
API ë³´ì•ˆ:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 90%
ì…ë ¥ ê²€ì¦:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 90%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì „ì²´ í‰ì :     9.5/10
```

---

## ğŸ¯ ê²°ë¡ 

### ê¸ì •ì  ì¸¡ë©´
1. âœ… **ê°•ë ¥í•œ ì¸ì¦ ì²´ê³„**: JWT ê¸°ë°˜ í† í° ì¸ì¦ êµ¬í˜„
2. âœ… **AOP ê¶Œí•œ ê²€ì¦**: ë¦¬ì†ŒìŠ¤ ì†Œìœ ê¶Œ ìë™ ê²€ì¦
3. âœ… **ë°ì´í„° ì•”í˜¸í™”**: ë¯¼ê°ì •ë³´ ì•”í˜¸í™” ì €ì¥
4. âœ… **Rate Limiting**: ê¸°ë³¸ì ì¸ ìš”ì²­ ì œí•œ êµ¬í˜„

### ê°œì„  í•„ìš” ì‚¬í•­
1. âš ï¸ **í† í° ê´€ë¦¬**: Refresh Token ë©”ì»¤ë‹ˆì¦˜ ì™„ì„± í•„ìš”
2. âš ï¸ **ë™ì‹œì„± ì œì–´**: ê³„ì • íƒˆí‡´ ë“± ì¤‘ìš” ì‘ì—…ì˜ íŠ¸ëœì­ì…˜ ê°•í™”
3. âš ï¸ **íŒŒì¼ ë³´ì•ˆ**: ì—…ë¡œë“œ íŒŒì¼ ê²€ì¦ ë° ì²˜ë¦¬ ê°œì„ 
4. âš ï¸ **ì—ëŸ¬ ì²˜ë¦¬**: ì •ë³´ ë…¸ì¶œ ìµœì†Œí™”

### ìµœì¢… í‰ê°€
Hamalog APIëŠ” **ì „ë°˜ì ìœ¼ë¡œ ì–‘í˜¸í•œ ë³´ì•ˆ ìˆ˜ì¤€**ì„ ìœ ì§€í•˜ê³  ìˆìœ¼ë‚˜, ëª‡ ê°€ì§€ **ì¤‘ìš”í•œ ì·¨ì•½ì **ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ í† í° ê°±ì‹  ë©”ì»¤ë‹ˆì¦˜ì˜ ë¶€ì¬ì™€ ê³„ì • íƒˆí‡´ ì‹œ ë™ì‹œì„± ë¬¸ì œëŠ” **ì¦‰ì‹œ í•´ê²°ì´ í•„ìš”**í•©ë‹ˆë‹¤. 

ì œì•ˆëœ ì¡°ì¹˜ì‚¬í•­ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì ìš©í•˜ë©´ ë³´ì•ˆ ë“±ê¸‰ì„ **9.5/10 ìˆ˜ì¤€ìœ¼ë¡œ í–¥ìƒ**ì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” **í”„ë¡œë•ì…˜ í™˜ê²½ì— ì í•©í•œ ë³´ì•ˆ ìˆ˜ì¤€**ì…ë‹ˆë‹¤.

---

**ë³´ê³ ì„œ ì‘ì„±**: AI Security Analyst  
**ê²€í† ì¼**: 2025-11-21  
**ë‹¤ìŒ ê²€í†  ì˜ˆì •ì¼**: 2026-02-21 (3ê°œì›” í›„)

---

## ğŸ“š ì°¸ê³  ìë£Œ

- OWASP Top 10 2021
- OWASP API Security Top 10
- Spring Security Reference Documentation
- JWT Best Practices (RFC 8725)
- CWE/SANS Top 25 Most Dangerous Software Errors

