# ë¡œì»¬ í™˜ê²½ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì „ëµ

**ì‘ì„±ì¼**: 2026-01-16  
**ìƒíƒœ**: ğŸŸ¢ êµ¬í˜„ ì§„í–‰ ì¤‘

---

## ğŸ“‹ ê°œìš”

### ê¸°ì¡´ ë°©ì‹ì˜ ë¬¸ì œì 

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| í”„ë¡œë•ì…˜ í™˜ê²½ ë³µì¡ì„± | Rate Limiting, ì¸ì¦, í™˜ê²½ë³€ìˆ˜ ì „ë‹¬ ë¬¸ì œ |
| ë¹„í˜„ì‹¤ì  ì‹œë‚˜ë¦¬ì˜¤ | 100ëª…ì´ ë™ì¼ ê³„ì •ìœ¼ë¡œ ë™ì‹œ ë¡œê·¸ì¸ |
| ì„¤ì • ë³µì¡ì„± | Gradle â†’ Gatling JVM í”„ë¡œí¼í‹° ì „ë‹¬ ì‹¤íŒ¨ |
| 429 ì˜¤ë¥˜ | Rate Limitingìœ¼ë¡œ 68% ìš”ì²­ ì‹¤íŒ¨ |

### ìƒˆë¡œìš´ ì ‘ê·¼: ë¡œì»¬ Docker í™˜ê²½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¡œì»¬ ê°œë°œ í™˜ê²½                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Gatling    â”‚â†’ â”‚  App        â”‚â†’ â”‚  MySQL      â”‚         â”‚
â”‚  â”‚  (Host JVM) â”‚  â”‚  (Docker)   â”‚  â”‚  (Docker)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚        â†“                                                    â”‚
â”‚  ğŸ“Š HTML Report                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì¥ì 

1. **ìˆœìˆ˜ ì„±ëŠ¥ ì¸¡ì •** - ë„¤íŠ¸ì›Œí¬ ì§€ì—°, CDN, Rate Limiting ì—†ì´ ìˆœìˆ˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ì¸¡ì •
2. **ì¬í˜„ ê°€ëŠ¥** - ë™ì¼í•œ í™˜ê²½ì—ì„œ Before/After ë¹„êµ
3. **ì„¤ì • ë‹¨ìˆœí™”** - í™˜ê²½ë³€ìˆ˜ ì „ë‹¬ ë¬¸ì œ ì—†ìŒ
4. **ë¹ ë¥¸ í”¼ë“œë°±** - ì½”ë“œ ìˆ˜ì • í›„ ì¦‰ì‹œ ì¬í…ŒìŠ¤íŠ¸

---

## ğŸ¯ ëª©í‘œ

1. **N+1 ë¬¸ì œ Before/After ì„±ëŠ¥ ë¹„êµ** - í•µì‹¬ ëª©í‘œ
2. **ì •ëŸ‰ì  ê°œì„  ìˆ˜ì¹˜ ë„ì¶œ** - í‰ê·  ì‘ë‹µ ì‹œê°„, P95, ì¿¼ë¦¬ ìˆ˜
3. **í¬íŠ¸í´ë¦¬ì˜¤ìš© ë²¤ì¹˜ë§ˆí¬ ë³´ê³ ì„œ ìƒì„±**

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### êµ¬ì„± ìš”ì†Œ

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | í¬íŠ¸ |
|----------|------|------|
| App (Docker) | Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ | 8080 |
| MySQL (Docker) | ë°ì´í„°ë² ì´ìŠ¤ | 3307 (í˜¸ìŠ¤íŠ¸) / 3306 (ì»¨í…Œì´ë„ˆ) |
| Redis (Docker) | ìºì‹œ/ì„¸ì…˜ (ì„ íƒ) | 6380 (í˜¸ìŠ¤íŠ¸) |
| Gatling (Host) | ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë„êµ¬ | - |

### í”„ë¡œíŒŒì¼

- `benchmark` í”„ë¡œíŒŒì¼ ì‚¬ìš©
- Rate Limiting ë¹„í™œì„±í™”
- ë²¤ì¹˜ë§ˆí¬ ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ ë¶ˆí•„ìš”

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
scripts/benchmark/
â”œâ”€â”€ docker-compose-benchmark.yml    # ë²¤ì¹˜ë§ˆí¬ í™˜ê²½ Docker Compose
â”œâ”€â”€ init-benchmark-data.sql         # í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”
â”œâ”€â”€ run-local-benchmark.sh          # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ cleanup-benchmark.sh            # ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸

src/gatling/kotlin/com/Hamalog/simulation/
â”œâ”€â”€ LocalMedicationBenchmark.kt     # N+1 vs Optimized ë¹„êµ (ì‹ ê·œ)
â””â”€â”€ (ê¸°ì¡´ íŒŒì¼ë“¤ - ë°±ì—… ìœ ì§€)

src/main/resources/
â””â”€â”€ application-benchmark.yml       # ë²¤ì¹˜ë§ˆí¬ í”„ë¡œíŒŒì¼ ì„¤ì •
```

---

## ğŸ”§ êµ¬í˜„ ê³„íš

### Phase 1: í™˜ê²½ êµ¬ì„±

1. `docker-compose-benchmark.yml` ìƒì„±
2. `application-benchmark.yml` ìƒì„±
3. `init-benchmark-data.sql` ìƒì„± (ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„°)

### Phase 2: ì‹œë®¬ë ˆì´ì…˜ ê°„ì†Œí™”

1. `LocalMedicationBenchmark.kt` ìƒì„±
   - ì¸ì¦ ì—†ì´ ë²¤ì¹˜ë§ˆí¬ ì—”ë“œí¬ì¸íŠ¸ ì§ì ‘ í˜¸ì¶œ
   - N+1 vs Optimized ìˆœìˆ˜ ë¹„êµ

### Phase 3: ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

1. `run-local-benchmark.sh` ìƒì„±
   - Docker í™˜ê²½ ì‹œì‘
   - í—¬ìŠ¤ ì²´í¬ ëŒ€ê¸°
   - Gatling ì‹¤í–‰
   - ê²°ê³¼ ì €ì¥
   - ì •ë¦¬

### Phase 4: ê²°ê³¼ ë¶„ì„

1. Gatling HTML ë¦¬í¬íŠ¸ ìë™ ì—´ê¸°
2. ê²°ê³¼ ìš”ì•½ Markdown ìƒì„±

---

## ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ ì„¤ê³„

### ì‹œë‚˜ë¦¬ì˜¤ 1: N+1 vs Optimized ë¹„êµ (í•µì‹¬)

```
ëª©ì : JPA ì¿¼ë¦¬ ìµœì í™” íš¨ê³¼ ì¸¡ì •
ë°©ì‹: ë²¤ì¹˜ë§ˆí¬ ì—”ë“œí¬ì¸íŠ¸ ì§ì ‘ í˜¸ì¶œ (ì¸ì¦ ì—†ìŒ)
ë¶€í•˜: 10 users/sec Ã— 30ì´ˆ = 300 requests per scenario
ì¸¡ì •: í‰ê·  ì‘ë‹µ ì‹œê°„, P95, P99
```

### í…ŒìŠ¤íŠ¸ ë°ì´í„°

```sql
-- Member 1ëª…
-- MedicationSchedule 100ê°œ
-- ê° Scheduleë‹¹ MedicationTime 3ê°œ = 300ê°œ
-- ì´ ì¿¼ë¦¬ ì°¨ì´:
--   N+1: 1 + 100 + 300 = 401 ì¿¼ë¦¬
--   Optimized: 1 ì¿¼ë¦¬ (fetch join)
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

```bash
# 1. ë²¤ì¹˜ë§ˆí¬ í™˜ê²½ ì‹œì‘ ë° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./scripts/benchmark/run-local-benchmark.sh

# 2. ê²°ê³¼ í™•ì¸
open build/reports/gatling/*/index.html
```

---

## ğŸ“ˆ ì˜ˆìƒ ê²°ê³¼

```
===============================================================================
                    N+1 vs Optimized Performance Comparison
===============================================================================

Before (N+1 Problem - optimized=false):
  â”œâ”€ Mean Response Time: 450ms
  â”œâ”€ P95 Response Time:  800ms
  â”œâ”€ P99 Response Time:  1200ms
  â””â”€ Database Queries:   1 + N (N=ìŠ¤ì¼€ì¤„ ìˆ˜)

After (Optimized - optimized=true):
  â”œâ”€ Mean Response Time: 85ms   (â†“ 81% ê°œì„ )
  â”œâ”€ P95 Response Time:  120ms  (â†“ 85% ê°œì„ )
  â”œâ”€ P99 Response Time:  180ms  (â†“ 85% ê°œì„ )
  â””â”€ Database Queries:   1 (ë‹¨ì¼ fetch join)

===============================================================================
```

---

## ğŸ“ ê´€ë ¨ ë¬¸ì„œ

- [JPA-PERFORMANCE.md](patterns/JPA-PERFORMANCE.md) - N+1 ë¬¸ì œ í•´ê²° íŒ¨í„´
- [BenchmarkController.java](../../src/main/java/com/Hamalog/controller/benchmark/BenchmarkController.java)
- [BenchmarkService.java](../../src/main/java/com/Hamalog/service/benchmark/BenchmarkService.java)

