spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false
spring.h2.console.enabled=false

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/hamalog?useSSL=false&allowPublicKeyRetrieval=true&characterEncoding=UTF-8&serverTimezone=UTC}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}

spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

spring.jpa.properties.hibernate.default_batch_fetch_size=100
spring.jpa.properties.hibernate.batch_fetch_style=LEGACY
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Transaction Configuration
# Set default transaction timeout to 30 seconds to prevent long-running transactions
spring.transaction.default-timeout=30
# Set isolation level to READ_COMMITTED (2) for better consistency
spring.jpa.properties.hibernate.connection.isolation=2

# SECURITY: Enable secure cookies for HTTPS in production
# Requires proper SSL/TLS certificate configuration
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# JWT Configuration - Direct property values (synchronized with local environment)
jwt.secret=bxQxgvUvnbDGgr3yYwravEX+7gAIbjE4zMjrO7Ybd74=
jwt.expiry=${JWT_EXPIRY:3600000}

# Data encryption key - Direct property value (synchronized with local environment)
hamalog.encryption.key=8escSvCR9B+h91dVNzCp5tXdbMi31BJa+VGqgtv1yqY=

# OAuth2 Kakao configuration - Real credentials for production (security vulnerabilities accepted)
spring.security.oauth2.client.registration.kakao.client-id=e26adea63cc62391e69f8de848a922ef
spring.security.oauth2.client.registration.kakao.client-secret=SD6dSoxwFE3ts1CSvYIxybwTqOkfhVyb
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.redirect-uri=${KAKAO_REDIRECT_URI:http://localhost:8080/oauth2/auth/kakao/callback}
spring.security.oauth2.client.registration.kakao.scope=profile_nickname,account_email
spring.security.oauth2.client.registration.kakao.client-name=kakao

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

hamalog.oauth2.redirect-uri=${FRONTEND_URL:http://localhost:3000}/oauth/kakao
hamalog.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:3000}

logging.level.com.Hamalog=info
logging.level.org.springframework.security=warn
logging.level.org.hibernate.SQL=warn
logging.level.org.hibernate.type.descriptor.sql=warn
logging.file.path=${LOG_DIR:/var/log/hamalog}

spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.connect-timeout=2000ms

spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8

server.max-http-request-header-size=64KB

server.tomcat.max-http-form-post-size=10MB
server.tomcat.max-swallow-size=10MB
server.tomcat.connection-timeout=20s
server.tomcat.max-connections=8192
server.tomcat.accept-count=100
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10

spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

spring.task.execution.pool.max-size=20
spring.task.execution.pool.core-size=8
spring.task.execution.pool.queue-capacity=100
spring.task.execution.pool.keep-alive=60s

hamalog.upload.image-dir=${UPLOAD_DIR:/data/hamalog/images}

management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=never
management.endpoint.health.show-components=never

# AOP Configuration - Synchronized with main application.properties
app.aop.global-enabled=true
app.aop.development-mode=false
app.aop.include-stack-trace=false
app.aop.auto-clean-mdc-context=true

app.aop.api-logging.enabled=true
app.aop.api-logging.max-response-length=200
app.aop.api-logging.max-parameter-length=200
app.aop.api-logging.performance.very-fast-threshold=100
app.aop.api-logging.performance.fast-threshold=500
app.aop.api-logging.performance.moderate-threshold=1000
app.aop.api-logging.performance.slow-threshold=3000

app.aop.performance.enabled=true
app.aop.performance.slow-threshold=1000
app.aop.performance.very-slow-threshold=3000
app.aop.performance.collect-stats=true
app.aop.performance.log-level=INFO

app.aop.audit.enabled=true
app.aop.audit.audit-login-failures=true
app.aop.audit.audit-data-changes=true
app.aop.audit.collect-ip-address=true
app.aop.audit.collect-user-agent=true
app.aop.audit.mask-sensitive-params=true
app.aop.audit.max-parameter-length=100
app.aop.audit.max-result-length=100

app.aop.retry.enabled=true
app.aop.retry.default-max-attempts=3
app.aop.retry.default-delay=1000
app.aop.retry.max-delay=10000
app.aop.retry.default-backoff-multiplier=2.0
app.aop.retry.collect-stats=true

app.aop.cache.enabled=true
app.aop.cache.default-ttl=300
app.aop.cache.max-ttl=86400
app.aop.cache.default-use-local-fallback=true
app.aop.cache.local-cache-max-size=1000
app.aop.cache.collect-stats=true
app.aop.cache.fallback-on-redis-failure=true