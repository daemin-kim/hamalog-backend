spring.application.name=Hamalog

spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:hamalog;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}

spring.jpa.hibernate.ddl-auto=update

# Transaction Configuration
# Set default transaction timeout to 30 seconds to prevent long-running transactions
spring.transaction.default-timeout=30

spring.security.oauth2.client.registration.kakao.client-id=${hamalog.oauth2.kakao.client-id:dummy-client-id-for-development}
spring.security.oauth2.client.registration.kakao.client-secret=${hamalog.oauth2.kakao.client-secret:dummy-client-secret-for-development}
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.redirect-uri=${hamalog.oauth2.kakao.redirect-uri:http://localhost:8080/api/auth/kakao/callback}
spring.security.oauth2.client.registration.kakao.scope=profile_nickname,account_email
spring.security.oauth2.client.registration.kakao.client-name=kakao

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

# CRITICAL: JWT_SECRET must be set as environment variable in production
# For development, a random secret will be generated if not provided
jwt.secret=${JWT_SECRET:}
jwt.expiry=${JWT_EXPIRY:3600000}

hamalog.encryption.key=${HAMALOG_ENCRYPTION_KEY:}

hamalog.oauth2.redirect-uri=${FRONTEND_URL:http://localhost:3000}/oauth/kakao

logging.file.path=${LOG_DIR:./logs}

app.aop.global-enabled=true
app.aop.development-mode=false
app.aop.include-stack-trace=false
app.aop.auto-clean-mdc-context=true

app.aop.api-logging.enabled=true
app.aop.api-logging.max-response-length=200
app.aop.api-logging.max-parameter-length=200
app.aop.api-logging.performance.very-fast-threshold=100
app.aop.api-logging.performance.fast-threshold=500
app.aop.api-logging.performance.moderate-threshold=1000
app.aop.api-logging.performance.slow-threshold=3000

app.aop.performance.enabled=true
app.aop.performance.slow-threshold=1000
app.aop.performance.very-slow-threshold=3000
app.aop.performance.collect-stats=true
app.aop.performance.log-level=DEBUG

app.aop.audit.enabled=true
app.aop.audit.audit-login-failures=true
app.aop.audit.audit-data-changes=true
app.aop.audit.collect-ip-address=true
app.aop.audit.collect-user-agent=true
app.aop.audit.mask-sensitive-params=true
app.aop.audit.max-parameter-length=100
app.aop.audit.max-result-length=100

app.aop.retry.enabled=true
app.aop.retry.default-max-attempts=3
app.aop.retry.default-delay=1000
app.aop.retry.max-delay=10000
app.aop.retry.default-backoff-multiplier=2.0
app.aop.retry.collect-stats=true

app.aop.cache.enabled=true
app.aop.cache.default-ttl=300
app.aop.cache.max-ttl=86400
app.aop.cache.default-use-local-fallback=true
app.aop.cache.local-cache-max-size=1000
app.aop.cache.collect-stats=true
app.aop.cache.fallback-on-redis-failure=true
